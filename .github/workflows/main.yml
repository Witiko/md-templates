name: Tpeset example documents
on:
  push:
jobs:
  typeset:
    name: Typeset example documents
    runs-on: ubuntu-latest
    container:
      image: witiko/markdown:latest
    steps:
      - uses: actions/checkout@v2

      - run: latexmk -shell-escape -lualatex -cd author_profile/example
      - run: mv author_profile/example.pdf author_profile-example.pdf

      - run: latexmk -shell-escape -lualatex -cd background_facts/example
      - run: mv background_facts/example.pdf background_facts-example.pdf

      - run: latexmk -shell-escape -lualatex -cd book_facts/example
      - run: mv book_facts/example.pdf book_facts-example.pdf

      - run: latexmk -shell-escape -lualatex -cd book_proposal/example
      - run: mv book_proposal/example.pdf book_proposal-example.pdf

      - run: latexmk -shell-escape -lualatex -cd business_card/example
      - run: mv business_card/example.pdf business_card-example.pdf

      - run: latexmk -shell-escape -lualatex -cd content_outline/example
      - run: mv content_outline/example.pdf content_outline-example.pdf

      - run: latexmk -shell-escape -lualatex -cd marketing_plan/example
      - run: mv marketing_plan/example.pdf marketing_plan-example.pdf

      - run: latexmk -shell-escape -lualatex -cd poster/example
      - run: mv poster/example.pdf poster-example.pdf

      - run: latexmk -shell-escape -lualatex -cd press_release/example
      - run: mv press_release/example.pdf press_release-example.pdf

      - run: latexmk -shell-escape -lualatex -cd publishing_plan/example
      - run: mv publishing_plan/example.pdf publishing_plan-example.pdf

      - run: latexmk -shell-escape -lualatex -cd qna/example
      - run: mv qna/example.pdf qna-example.pdf

      - run: latexmk -shell-escape -lualatex -cd report/example
      - run: mv report/example.pdf report-example.pdf

      - run: latexmk -shell-escape -lualatex -cd scenario/example
      - run: mv scenario/example.pdf scenario-example.pdf

      - uses: marvinpinto/action-automatic-releases@latest
        if: github.ref == 'refs/heads/main'
        with:
          title: The latest example documents
          automatic_release_tag: latest
          prerelease: true
          repo_token: ${{ secrets.GITHUB_TOKEN }}
          files: |
            author_profile-example.pdf
            background_facts-example.pdf
            book_facts-example.pdf
            book_proposal-example.pdf
            business_card-example.pdf
            content_outline-example.pdf
            marketing_plan-example.pdf
            poster-example.pdf
            press_release-example.pdf
            publishing_plan-example.pdf
            qna-example.pdf
            report-example.pdf
            scenario-example.pdf
